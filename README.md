# SADOM System


## Структура проекта

- **chating.py** - Telegram-интерфейс (кнопки, меню) 
- **commands.py** - Обработчики команд бота (/start, /stop)
- **config_parse.py** - Чтение конфигурации из SAM.cfg
- **db.py** - Работа с PostgreSQL
- **funcs.py** - Основная бизнес-логика
- **glob.py** - Глобальные переменные
- **logger.py** - Настройка логгирования
- **objects.py** - Класс Window (ядро системы)
- **workers.py** - Воркеры для задач (clicker, grafana)
- **sadom.py** - Главный исполняемый файл


## Ключевые компоненты

### 1. Управление окнами (`objects.py`)
- **Класс `Window`**: 
  - Создает/уничтожает окна браузеров
  - Управляет позицией и размером
  - Хранит состояние (задача, фильтр, блокировка)

### 2. Telegram-бот (`chating.py`, `commands.py`)
- **Интерактивные меню**:
  - Выбор монитора → окна → действия
  - Пресеты, пауза, обновление
- **Команды**:
  - `/start_monitoring` – запуск системы
  - `/report` – статус окон
  - `/control` – пульт управления

### 3. Задачи (`workers.py`)
- **Типы задач**:
  - `clicker_worker`: Автокликер по сценариям из БД
  - `grafana_worker`: Обновление дашбордов
  - `url_worker`: Открытие произвольных URL

### 4. Данные (`db.py`)
- **Подключение** к PostgreSQL
- **Запросы** для:
  - Конфигурации окон (`get_clicker_cfg_table`)
  - Фильтров (`get_clicker_filters`)
  - Grafana (`get_grafana_urls`)

## Принцип работы

1. При запуске `sadom.py` система:  
   - Обнаруживает все мониторы через screeninfo  
   - Создает по 4 окна на каждый монитор  
   - Применяет стартовую конфигурацию "default"  

2. Пользователь управляет через Telegram:
    - /control → [Монитор1] → [Окно2] → [Fullscreen]
    - /report → Показывает статус всех окон
  
3. Окна работают автономно:  
    - Обновляются по таймеру (30-600 сек)  
    - Авторизуются на сайтах по данным из SAM.cfg  
    - Перезапускаются при сбоях 


P.s. Не то, чтобы ридмик, но понятно, что вообще тут происходит))
